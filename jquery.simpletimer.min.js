(function(e){function t(e,t){t.timeout=setTimeout(function(){n(e,t)},t.increment)}function n(n,r){r.count+=r.increment;r.percent=Math.round(r.count/r.duration*1e3)/1e3;if(r.onIncrement){r.onIncrement.apply(n,r)}if(r.count>=r.duration){r.percent=1;if(r.onComplete){r.onComplete.apply(n,r)}i.stop.apply(e(n));return true}t(n,r)}var r={all:function(t){var n=this.filter(function(){if(e(this).data("SimpleTimer.settings")===undefined){e.error('Simple Timer Error: method "'+t+'" was '+"called on an element which has not been initialized.");return false}return true});if(n.length===0){return false}if(r[t]){r[t].apply(n,Array.prototype.slice.call(arguments,1))}else{i[t].apply(n,Array.prototype.slice.call(arguments,1))}return this},start:function(){var t=this.filter(function(){var t=e(this).data("SimpleTimer.settings");if(t.isTiming){return false}if(t.percent===1){return false}return true});if(t.length===0){return false}i.start.call(t);return true},stop:function(){var t=this.filter(function(){var t=e(this).data("SimpleTimer.settings");if(!t.isTiming){return false}return true});if(t.length===0){return false}i.stop.call(t);return true}},i={init:function(t){var n=e.extend(true,{increment:1e3,duration:1e3,autostart:false,onComplete:false,onIncrement:false,onStart:false,onStop:false,onReset:false},t,{timeout:null,count:0,percent:0,isTiming:false,isCounting:false});return this.each(function(){e(this).data("SimpleTimer.settings",n);if(n.autostart){i.start.apply(e(this))}})},destroy:function(){return this.each(function(){i.reset.apply(e(this));e(this).removeData("SimpleTimer.settings")})},start:function(){return this.each(function(){var n=e(this).data("SimpleTimer.settings");n.isTiming=true;if(n.onStart){n.onStart.apply(this,n)}t(this,n)})},stop:function(){return this.each(function(){var t=e(this).data("SimpleTimer.settings");clearTimeout(t.timeout);t.isTiming=false;if(t.onStop){t.onStop.apply(this,t)}})},reset:function(){return this.each(function(){var t=e(this).data("SimpleTimer.settings");e(this).simpleTimer("stop");t.count=0;t.percent=0;if(t.onReset){t.onReset.apply(this,t)}})}};e.fn.simpleTimer=function(t){if(i[t]){return r.all.apply(this,arguments)}else if(typeof t==="object"||!t){return i.init.apply(this,arguments)}else{e.error("Simple Timer Error: method "+t+" does not exist.")}}})(jQuery)
